{% extends 'base-backend.html.twig' %}

{% block title %}New Carousel{% endblock %}

{% block body %}
    <h1>Create new Carousel</h1>
    <a href="{{ path('app_admin_carousel_index') }}" class="btn btn-dark my-3">Retour Ã  la liste</a>

    {{ include('admin_carousel/_form.html.twig') }}

{% endblock %}
{% block javascripts %}
	<script>
		$('.select2').select2();
	</script>
	<script>
        const addFormToCollection = (e) => {
        const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

        const item = document.createElement('li');

        item.innerHTML = collectionHolder
            .dataset
            .prototype
            .replace(
            /__name__/g,
            collectionHolder.dataset.index
            );

        collectionHolder.appendChild(item);

        collectionHolder.dataset.index++;
        };
        //
		document
        .querySelectorAll('.add_item_link').forEach(btn => {
            btn.addEventListener("click", addFormToCollection)
        });
	</script>
{% endblock %}
